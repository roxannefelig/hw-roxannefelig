---
title: "HW3"
author: "Roxanne Felig"
date: "2/8/2021"
output:
    html_document:
        theme: paper
    github_document: default
---
# Homework 03

You will analyze data looking at the relationship between **green reputation** and three personality traits--**compassion**, **intellectual curiosity**, and **openness to experiences**.
The dataset includes data from **students** and **non-students**.

```{r}
dictionary <- readr::read_csv("/Users/roxannefelig/Desktop/progdata/hw-roxannefelig/HW3/green_dictionary.csv")
green_data <- readr::read_csv("/Users/roxannefelig/Desktop/progdata/hw-roxannefelig/HW3/green_data.csv")
```

```{r view files}
View(dictionary)
View(green_data)
library(tidyverse)
library(dplyr)
library(psych)
library(naniar)
library(reshape2)
```


```{r question 1}
###1. Inspect the item responses (e.g., with graphs or by summarizing distinct values). Is anything unusual?

str(green_data)
summary(green_data) #I notice that some missing values are coded as NA while others are coded as -99, so I'm going to re-code the -99s as NAs.

data<-green_data %>% 
  mutate_at(vars(comp1:student),
         ~ifelse(. == -99, NA, .)
  )

summary(data) #now we see that the min values for variables are 1, not -99.

melt_data<-melt(data) #collapses data to one column
View(melt_data)

#plotting using the melted data and the facet wrap will allow us to see histograms for each scale item, and the frequency of each response choice.

ggplot(melt_data)+
  aes(x=value)+
  geom_histogram()+
  facet_wrap(~variable, 
             scales="free")
```


```{r question 2}
### 2. Compute total scores for the four scales. Recode variables as needed.

#First, we need to reverse code items as indicated in the dictionary. The reverse coded items are green2,comp6:comp10, intel7:intel10,and open7:open10. 
#two ways to reverse code shown below:

reversed1<- c("green2", "comp6", "comp7","comp8","comp9","comp10","intel7",
             "intel8","intel9","intel10","open7","open8","open9","open10")

reversed2 <- dictionary %>%
  filter(Keying == -1) %>%
  pull(Item)     
     
data %>%
  mutate(
    across(all_of(reversed),
           ~ recode(.x, "5" = 1, "4" = 2, "3" = 3, "2" = 4, "1" = 5),
           .names = "{.col}r")
  )

#total scores
summary(data)


```     
  3. Rescale the variables so that they go from 0-100 instead of the original range.
     Name the recaled variables `*_pomp`.
  4. Make plots that illustrate the distributions of the 4 POMP-scored variables.
  5. Make scatterplots showing the relationships between **green reputation** and each personality trait.
     Include trend lines for **students** and **non-students**.
     What do these plots show?
  6. Compare **green reputation** for students and non-students using a **rainfall plot** (bar + density + data points).
  7. Compute a summary table of means, SDs, medians, minima, and maxima for the four total scores for students and non-students.
  
In your assignment, prepare an RMarkdown file that includes both the coding and (for 4-7) narrative descriptions of your results.
